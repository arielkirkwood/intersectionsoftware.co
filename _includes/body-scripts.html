<script type="text/javascript">
  function forEachElement(selector, fn) {
    var elements = document.querySelectorAll(selector);

    for (var i = 0; i < elements.length; i++) {
      fn(elements[i], i);
    }
  }

  function addClass(element, className) {
    if (element.classList) {
      element.classList.add(className);
    } else {
      element.className += ' ' + className;
    }
  }

  function colorCellInit(element, index) {
    var className = 'color-' + (index % 3);

    addClass(element, className);
  }

  window.setTimeout(function ()
    {forEachElement('.color-cell', colorCellInit);}, 1);
</script>
